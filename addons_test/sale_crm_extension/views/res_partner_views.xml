<odoo>
    <data>

        <record id="res_partner_view_tree" model="ir.ui.view">
            <field name="name">res.partner.tree.inh</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_tree"/>
            <field name="arch" type="xml">
               <xpath expr="/tree/field[@name='category_id']" position="after">
                   <field name="state"/>
               </xpath>
                <xpath expr="/tree/field[@name='state_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
               </xpath>
            </field>
        </record>

        <record id="res_partner_view_form" model="ir.ui.view">
            <field name="name">res.partner.form.inh</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/div" position="after">
                    <header>
                        <field name="state" widget="statusbar"/>
                        <button name="action_submit_to_dcm" type="object" states="draft" string="Soumettre au DCM"
                                class="oe_highlight" id="draft_submit"
                                groups="sale_crm_extension.group_chef_service_commercial"/>

                        <button name="action_submit_to_daf" type="object" states="dcm" string="Soumettre au DAF"
                                class="oe_highlight" id="dcm_submit"
                                groups="sale_crm_extension.group_marketing_director"/>

                        <button name="%(sale_crm_extension.action_reject_raison_wizard)d" states="dcm" string="Refuser"
                                type="action" class="oe_highlight"
                                groups="sale_crm_extension.group_marketing_director"/>

                        <button name="action_daf" type="object" states="daf" string="Valider"
                                class="oe_highlight" id="daf_submit"
                                groups="sale_crm_extension.group_financial_director"/>

                        <button name="%(sale_crm_extension.action_reject_raison_wizard)d" states="daf" string="Refuser"
                                type="action" class="oe_highlight"
                                groups="sale_crm_extension.group_financial_director"/>

                        <button name="action_account" type="object" states="account" string="Valider"
                                class="oe_highlight" id="account_submit"
                                groups="sale_crm_extension.group_head_account"/>

                        <button name="%(sale_crm_extension.action_reject_raison_wizard)d" states="account"
                                string="Refuser"
                                type="action" class="oe_highlight" groups="sale_crm_extension.group_head_account"/>

                    </header>
                </xpath>
                <xpath expr="//field[@name='ref']" position="after">
                    <field name="is_spanco" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='parent_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='parent_id']" position="before">
                    <field name="ref" class="oe_inline" style="font-size:25px; font-weight:bold"/>
                </xpath>
                <xpath expr="//field[@name='vat']" position="after">
                    <field name="refuse_raison" invisible="1"/>
                    <field name="url_link" invisible="1"/>
                    <field name="tax_number" placeholder="Numéro fiscal"/>
                    <field name="fax" placeholder="Fax"/>
                </xpath>
                <xpath expr="//field[@name='ref']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='state_id']" position="attributes">
                     <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='fax']" position="after">
                    <field name="customer_category"/>
                    <field name="potential_customer"/>
                    <field name="type_partner" required="1"/>
                </xpath>

                <xpath expr="/form/sheet/group/group[2]/field[@name='function']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                </xpath>

                <xpath expr="//field[@name='property_account_payable_id']" position="attributes">
                    <attribute name="required">0</attribute>
                </xpath>

                <xpath expr="//field[@name='property_account_receivable_id']" position="attributes">
                    <attribute name="required">0</attribute>
                </xpath>
                <xpath expr="/form/sheet/group/group[2]/field[@name='title']" position="attributes">
                    <attribute name="attrs">{}</attribute>
                </xpath>

                <xpath expr="/form/sheet/group/group[2]/field[@name='title']" position="replace">
                </xpath>

                <xpath expr="/form/sheet/group/group[2]/field[@name='function']" position="before">
                    <field name="partner_name"/>
                </xpath>

                <xpath expr="/form/sheet/group/group[2]/field[@name='function']" position="after">
                    <field name="title"/>
                    <field name="partner_email"/>
                    <field name="partner_phone" widget="phone"/>
                    <field name="partner_mobile" widget="phone" options="{'enable_sms': True}"/>
                    <label for="manager_name"/>
                    <div class="o_row">
                        <field name="manager_name"/>
                        <field name="title" placeholder="Titre" domain="[]" options='{"no_open": True}'/>
                    </div>
                    <field name="manager_function"/>
                </xpath>

                <xpath expr="//form/sheet/group" position="after">
                    <group string="Autres informations de la société" col="4" colspan="4">
                        <group style="width: 50%;">
                            <label for="capital"/>
                            <div class="o_row">
                                <field name="capital" required="1"/>
                                <field name="monetary"/>
                            </div>
                            <field name="legal_form_id" options="{'no_create_edit':True}"
                            />
                            <field name="rccm"/>
                            <field name="taxpayer_account"/>
                            <field name="tax_declaration"/>
                            <field name="cnps"/>
                        </group>
                        <group style="width: 50%;">
                            <field name="group_id" options="{'no_create_edit':True}"/>
                            <field name="branch_activity1" options="{'no_create_edit':True}"
                            />
                            <field name="primary_activity" options="{'no_create_edit':True}"
                            />
                            <field name="company_siz_id" options="{'no_create_edit':True}"
                            />
                            <label for="number_employees"/>
                            <div class="o_row">
                                <field name="number_employees" readonly="1"/>
                                <field name="number_man" style="text-align:right"/>
                                <span class="oe_inline">Hommes</span>
                                <field name="number_woman" style="text-align:right"/>
                                <span class="oe_inline">Femmes</span>
                            </div>
                            <label for="company_turnover"/>
                            <div class="o_row">
                                <field name="company_turnover"/>
                                <field name="monetary"/>
                            </div>
                            <label for="budget"/>
                            <div class="o_row">
                                <field name="budget"/>
                                <field name="monetary"/>
                            </div>
                        </group>
                    </group>
                </xpath>

                <notebook position="inside">
                    <page string="Raison de refus" name="page_raison_refuse">
                        <group>
                            <group>
                                <field name="refuse_raison"/>
                                <field name="refuse_raison_daf"/>
                            </group>
                            <group>
                                <field name="refuse_raison_account"/>
                            </group>
                        </group>
                    </page>
                </notebook>
            </field>
        </record>

    </data>
</odoo>
